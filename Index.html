<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beyblade Battle Game</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0; }
    h1 { text-align: center; }
    .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
    select, button { margin: 10px 0; padding: 10px; width: 100%; }
    .result { margin-top: 20px; font-weight: bold; white-space: pre-line; }
    .battle-area { margin-top: 30px; display: flex; justify-content: space-around; align-items: center; height: 200px; position: relative; }
    .beyblade { width: 100px; transition: transform 1s ease; }
    .vs { font-size: 24px; font-weight: bold; }
    audio { display: none; }
    .leaderboard { margin-top: 20px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Beyblade Battle Game</h1>
    <h3>Select Your Beyblade Parts</h3>
    <label>Blade:
      <select id="bladeSelect"></select>
    </label>
    <label>Ring:
      <select id="ringSelect"></select>
    </label>
    <label>Tip:
      <select id="tipSelect"></select>
    </label>
    <button onclick="startBattle()">Battle!</button>

    <div class="battle-area">
      <img id="playerImg" class="beyblade" src="https://via.placeholder.com/100?text=You" alt="Player Bey">
      <span class="vs">VS</span>
      <img id="enemyImg" class="beyblade" src="https://via.placeholder.com/100?text=Enemy" alt="Enemy Bey">
    </div>

    <div class="result" id="result"></div>

    <h3>Multiplayer Mode (Local)</h3>
    <button onclick="toggleMultiplayer()">Toggle Multiplayer</button>

    <audio id="battleSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_8bb4f41884.mp3?filename=battle-144732.mp3"></audio>

    <h3>Leaderboard</h3>
    <div class="leaderboard" id="leaderboard"></div>
  </div>

  <script>
    let multiplayer = false;
    let winCount = 0;
    let lossCount = 0;
    let tieCount = 0;

    const parts = {
      blade: [
        { name: "Razor", attack: 8, defense: 3, stamina: 2, weight: 5, height: 3, img: "https://via.placeholder.com/100?text=Razor" },
        { name: "Crusher", attack: 6, defense: 5, stamina: 4, weight: 6, height: 2, img: "https://via.placeholder.com/100?text=Crusher" },
        { name: "Cyclone", attack: 4, defense: 4, stamina: 7, weight: 4, height: 3, img: "https://via.placeholder.com/100?text=Cyclone" },
        { name: "Shadow", attack: 7, defense: 6, stamina: 3, weight: 6, height: 4, img: "https://via.placeholder.com/100?text=Shadow" }
      ],
      ring: [
        { name: "Iron Ring", attack: 3, defense: 6, stamina: 3, weight: 7, height: 1 },
        { name: "Wind Ring", attack: 2, defense: 3, stamina: 6, weight: 3, height: 2 },
        { name: "Spiked Ring", attack: 5, defense: 2, stamina: 4, weight: 4, height: 2 },
        { name: "Fire Ring", attack: 6, defense: 2, stamina: 3, weight: 5, height: 2 }
      ],
      tip: [
        { name: "Sharp Tip", attack: 2, defense: 3, stamina: 6, weight: 2, height: 1 },
        { name: "Flat Tip", attack: 4, defense: 2, stamina: 4, weight: 3, height: 1 },
        { name: "Ball Tip", attack: 3, defense: 4, stamina: 5, weight: 2, height: 2 },
        { name: "Jet Tip", attack: 5, defense: 3, stamina: 4, weight: 3, height: 2 }
      ]
    };

    function toggleMultiplayer() {
      multiplayer = !multiplayer;
      alert(`Multiplayer is now ${multiplayer ? "ON" : "OFF"}`);
    }

    function populateSelect(selectId, options) {
      const select = document.getElementById(selectId);
      select.innerHTML = "";
      options.forEach((part, index) => {
        const opt = document.createElement('option');
        opt.value = index;
        opt.textContent = `${part.name} (Atk: ${part.attack}, Def: ${part.defense}, Sta: ${part.stamina})`;
        select.appendChild(opt);
      });
    }

    function assembleBeyblade(blade, ring, tip) {
      return {
        name: `${blade.name}-${ring.name}-${tip.name}`,
        attack: blade.attack + ring.attack + tip.attack,
        defense: blade.defense + ring.defense + tip.defense,
        stamina: blade.stamina + ring.stamina + tip.stamina,
        weight: blade.weight + ring.weight + tip.weight,
        height: blade.height + ring.height + tip.height,
        img: blade.img
      };
    }

    function battle(bey1, bey2) {
      let score1 = 0;
      let score2 = 0;
      const categories = ["attack", "defense", "stamina"];
      for (const cat of categories) {
        if (bey1[cat] > bey2[cat]) score1++;
        else if (bey2[cat] > bey1[cat]) score2++;
      }
      score1 += bey1.weight > bey2.weight ? 1 : 0;
      score2 += bey2.weight > bey1.weight ? 1 : 0;
      score1 += bey1.height > bey2.height ? 1 : 0;
      score2 += bey2.height > bey1.height ? 1 : 0;
      score1 += Math.random();
      score2 += Math.random();
      if (score1 > score2) return 1;
      else if (score2 > score1) return 2;
      else return 0;
    }

    function updateLeaderboard(result) {
      if (result === 1) winCount++;
      else if (result === 2) lossCount++;
      else tieCount++;

      document.getElementById('leaderboard').innerText =
        `Wins: ${winCount}\nLosses: ${lossCount}\nTies: ${tieCount}`;
    }

    function animateBattle(player, enemy) {
      const playerImg = document.getElementById('playerImg');
      const enemyImg = document.getElementById('enemyImg');
      playerImg.style.transform = 'rotate(1080deg)';
      enemyImg.style.transform = 'rotate(-1080deg)';
      playerImg.src = player.img;
      enemyImg.src = enemy.img;
    }

    function startBattle() {
      const audio = document.getElementById('battleSound');
      audio.play();

      const blade = parts.blade[document.getElementById('bladeSelect').value];
      const ring = parts.ring[document.getElementById('ringSelect').value];
      const tip = parts.tip[document.getElementById('tipSelect').value];
      const playerBey = assembleBeyblade(blade, ring, tip);

      let enemyBey;
      if (multiplayer) {
        const enemyBlade = parts.blade[parseInt(prompt("Enemy: Choose blade (0-3):"))];
        const enemyRing = parts.ring[parseInt(prompt("Enemy: Choose ring (0-3):"))];
        const enemyTip = parts.tip[parseInt(prompt("Enemy: Choose tip (0-3):"))];
        enemyBey = assembleBeyblade(enemyBlade, enemyRing, enemyTip);
      } else {
        enemyBey = assembleBeyblade(
          parts.blade[Math.floor(Math.random() * parts.blade.length)],
          parts.ring[Math.floor(Math.random() * parts.ring.length)],
          parts.tip[Math.floor(Math.random() * parts.tip.length)]
        );
      }

      animateBattle(playerBey, enemyBey);

      setTimeout(() => {
        const resultNum = battle(playerBey, enemyBey);
        let resultText;
        if (resultNum === 1) resultText = `${playerBey.name} wins!`;
        else if (resultNum === 2) resultText = `${enemyBey.name} wins!`;
        else resultText = "It's a tie!";

        document.getElementById('result').innerText = `You: ${playerBey.name} vs Enemy: ${enemyBey.name}\n${resultText}`;
        updateLeaderboard(resultNum);
      }, 1200);
    }

    window.onload = () => {
      populateSelect('bladeSelect', parts.blade);
      populateSelect('ringSelect', parts.ring);
      populateSelect('tipSelect', parts.tip);
    };
  </script>
</body>
</html>
